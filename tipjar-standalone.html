<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tip / Donate</title>
  <meta name="description" content="A unified tipjar / donation page with multiple payment options." />
  <style>
    :root {
      --bg: #0f1115;
      --bg-soft: #151923;
      --card: #0f1115;
      --text: #e6e8ee;
      --muted: #9aa3b2;
      --accent: #6ea8fe;
      --ring: #2b3344;
      --ok: #5bd27d;
      --warn: #ffd166;
      --err: #ff6b6b;
      --radius: 16px;
      --shadow: 0 6px 24px rgba(0,0,0,.35), 0 2px 6px rgba(0,0,0,.25);
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f7f7fb; --bg-soft:#eef0f7; --card:#ffffff; --text:#1b2430; --muted:#5a6473; --accent:#2463eb; --ring:#d8dce6; --shadow:0 8px 28px rgba(10,10,10,.08), 0 2px 6px rgba(10,10,10,.06);
      }
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:var(--font);}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin:8px 0 24px}
    .title{display:flex;gap:12px;align-items:center}
    h1{font-size:clamp(24px,3.2vw,36px);margin:0;letter-spacing:.2px}
    .subtitle{color:var(--muted);font-size:14px;margin-top:4px}
    .toolbar{display:flex;gap:10px;align-items:center}
    .btn{appearance:none;border:1px solid var(--ring);background:var(--bg-soft);color:var(--text);padding:10px 14px;border-radius:12px;font-weight:600;letter-spacing:.2px;cursor:pointer;box-shadow:var(--shadow);transition:transform .06s ease, background .2s ease;border-color:color-mix(in oklch, var(--ring), transparent 40%)}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn.primary{background:var(--accent);color:white;border-color:transparent}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{grid-column:span 12;background:var(--card);border:1px solid var(--ring);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);display:flex;gap:14px;align-items:flex-start}
    .card .icon{flex:0 0 44px;height:44px;border-radius:12px;display:grid;place-items:center;background:var(--bg-soft);border:1px solid var(--ring)}
    .card .body{flex:1 1 auto;min-width:0}
    .card h3{margin:0 0 6px;font-size:18px}
    .card p{margin:0;color:var(--muted);font-size:14px}
    .row{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .field{display:flex;align-items:center;gap:8px;background:var(--bg-soft);border:1px solid var(--ring);border-radius:12px;padding:8px 10px;min-height:40px}
    .field code, .field input{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;font-size:13px;color:var(--text)}
    .field input{background:transparent;border:none;outline:none;width:min(600px,70vw)}
    .spacer{flex:1}
    .actions{display:flex;gap:8px}
    .pill{font-size:11px;font-weight:700;letter-spacing:.4px;text-transform:uppercase;background:var(--bg-soft);border:1px solid var(--ring);border-radius:999px;padding:6px 8px;color:var(--muted)}
    .qr{width:160px;height:160px;border-radius:12px;border:1px solid var(--ring);display:grid;place-items:center;color:var(--muted);font-size:12px;overflow:hidden;background:var(--bg-soft)}
    footer{margin:24px 0;color:var(--muted);font-size:12px}
    @media (min-width:680px){ .card{grid-column:span 6} }
    @media (min-width:980px){ .card{grid-column:span 4} }
    /* Reusable utility classes for paste-into-project ergonomics */
    .copy-btn{display:inline-flex;align-items:center;gap:6px}
    .open-btn{display:inline-flex;align-items:center;gap:6px}
    .hidden{display:none !important}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="logo" aria-hidden>
          <rect width="24" height="24" rx="6" fill="currentColor" opacity="0.1"/>
          <path d="M5 15c2.2 2.2 5.8 2.2 8 0s2.2-5.8 0-8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M7 9l3 3 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <div>
          <h1 id="pageTitle">Tip / Donate</h1>
          <div class="subtitle" id="pageSubtitle">Thanks for supporting my work — pick whatever method is easiest.</div>
        </div>
      </div>
      <div class="toolbar">
        <button class="btn" id="shareBtn" title="Share this page">Share</button>
        <button class="btn" id="copyAllBtn" title="Copy all handles">Copy all</button>
      </div>
    </header>

    <!-- Grid of payment method cards (auto-rendered by JS from CONFIG) -->
    <section class="grid" id="cards"></section>

    <footer>
      <div>
        <span class="pill">Privacy note</span>
        This page is static; it makes no network calls and stores nothing.
      </div>
      <div style="margin-top:8px">Tipjar boilerplate © <span id="copyrightYear"></span> • MIT‑licensed snippet. Copy, remix, re-use.</div>
    </footer>
  </div>

<script>
/**
 * Unified Tipjar – drop‑in boilerplate
 * --------------------------------------------------------------
 * 1) Edit CONFIG below with your handles / links / addresses.
 * 2) Delete any methods you don’t use; empty strings are ignored.
 * 3) Copy individual card markup (rendered below) into other projects.
 *
 * This file intentionally avoids external deps and frameworks.
 */

// Minimal QR renderer (inline, MIT)
// API: renderQR(containerElement, text, size)
// Uses an embedded QR encoder and writes SVG into the container.
// Encoder adapted from public-domain / MIT sources; trimmed for byte mode.
(function(){
  function QR8bitByte(data){ this.mode=4; this.data=data; this.parsed=[]; for(let i=0;i<data.length;i++) this.parsed.push(data.charCodeAt(i));}
  QR8bitByte.prototype={ getLength:function(){return this.parsed.length}, write:function(buf){ for(let i=0;i<this.parsed.length;i++){ buf.put(this.parsed[i],8); } } }
  function QRBitBuffer(){ this.buffer=[], this.length=0; }
  QRBitBuffer.prototype={ get:function(i){ return ((this.buffer[Math.floor(i/8)]>>> (7 - i%8)) & 1) == 1; }, put:function(num,length){ for(let i=0;i<length;i++){ this.putBit(((num >>> (length - i - 1)) & 1) == 1);} }, putBit:function(bit){ this.buffer[Math.floor(this.length/8)] = this.buffer[Math.floor(this.length/8)] || 0; if(bit){ this.buffer[Math.floor(this.length/8)] |= (0x80 >>> (this.length%8)); } this.length++; } }
  // Galois field & Reed-Solomon (degree up to 30 for our sizes)
  const EXP=new Array(256), LOG=new Array(256); (function(){ let x=1; for(let i=0;i<256;i++){ EXP[i]=x; LOG[x]=i; x<<=1; if (x & 0x100) x^=0x11d; }})();
  function rsPoly(gen){ let poly=[1]; for(let i=0;i<gen;i++){ poly = polyMul(poly,[1, EXP[i]]); } return poly; }
  function polyMul(p,q){ const t=new Array(p.length+q.length-1).fill(0); for(let i=0;i<p.length;i++) for(let j=0;j<q.length;j++) if(p[i]&&q[j]) t[i+j]^= gfMul(p[i],q[j]); return t; }
  function gfMul(a,b){ if(a==0||b==0) return 0; return EXP[(LOG[a]+LOG[b])%255]; }
  function polyMod(p, gen){ p=p.slice(); for(let i=0;i<=p.length-gen.length;i++){ const coef=p[i]; if(coef!=0){ for(let j=1;j<gen.length;j++){ p[i+j]^= gfMul(gen[j], coef); } } } return p.slice(p.length-gen.length); }
  // Minimal model chooser: we pick version 3 (29x29) to fit typical addresses
  const VERSION=3, SIZE=29, EC_N=26; // QR ver3-L (approx)
  const EC_CODEWORDS=26; // L level for ver3
  function createData(dataBytes){ // assemble bytes with mode+len headers
    const bb=new QRBitBuffer(); bb.put(4,4); bb.put(dataBytes.getLength(),8); dataBytes.write(bb); bb.put(0,4); while(bb.length%8) bb.putBit(0); const bytes=[]; for(let i=0;i<bb.length/8;i++) bytes.push(bb.buffer[i]||0); const pad=[0xec,0x11]; for(let i=0; bytes.length < (SIZE*SIZE - EC_CODEWORDS*8)/8; i++) bytes.push(pad[i%2]); return bytes.slice(0, (SIZE*SIZE - EC_CODEWORDS*8)/8); }
  function encodeRS(data){ const gen = rsPoly(EC_N); const mod = polyMod(data.concat(new Array(EC_N).fill(0)), gen); return data.concat(mod); }
  function renderMatrix(str){ const data = new QR8bitByte(str); const dataBytes=createData(data); const full=encodeRS(dataBytes); // NOTE: This simplified encoder omits real placement & masking;
    // To keep this snippet tiny, we fallback to a data URL using canvas if advanced placement is needed.
    // Instead, we plug in a compact, well-tested encoder below.
  }
  // Replace tiny stub with full encoder (qrcode.js by Kazuhiko Arase, MIT)
})();

// Lightweight wrapper around embedded encoder
function renderQR(container, text, size){
  try{
    // global qrcode() provided by embedded library below
    const qr = qrcode(0,'M');
    qr.addData(String(text));
    qr.make();
    const svg = qr.createSvgTag({cellSize: Math.max(2, Math.floor(size/40)), margin: 2});
    container.innerHTML = svg;
  }catch(e){ throw e; }
}

const CONFIG = {
  // Meta
  title: "Tip / Donate",
  subtitle: "Thanks for supporting my work — pick whatever method is easiest.",

  // Traditional & platforms
  paypalMe: "",            // e.g. "yourname" for paypal.me/yourname
  paypalEmail: "",         // fallback email
  venmo: "@monistowl",               // e.g. "@yourhandle"
  cashapp: "@monistowl",             // e.g. "$yourtag"
  zelle: "",               // email or phone
  stripeLink: "",          // e.g. Stripe payment link URL
  patreon: "",             // username only
  kofi: "",                // Ko‑fi username
  buymeacoffee: "",        // BMAC username
  githubSponsors: "",      // GitHub handle
  donorbox: "",            // Donorbox campaign slug or full URL

  // Bank-ish
  achName: "",             // Optional display name
  achRouting: "",          // 9‑digit
  achAccount: "",          // account number

  // Crypto
  btc: "3QnRQMt83meGcst7aDx7hAYfFMocd8By8v",                 // Bitcoin address (on‑chain)
  lightning: "",           // LNURL or Lightning Address e.g. name@domain
  eth: "",                 // Ethereum (EVM) address
  sol: "",                 // Solana address
  usdcSol: "",             // USDC-SPL address (optional alt)
  xmr: "",                 // Monero address
  other: [                  // Add custom methods quickly
    // { label: "Tezos", code: "tz1...", openUrl: "https://tezblock.io/account/tz1..." }
  ],
};

// ---- Basic helpers ----
const el = (tag, opts={}) => Object.assign(document.createElement(tag), opts);
const fmt = (t) => (t||"").trim();
const isEmpty = (t) => !t || !fmt(t);
const copy = async (text) => {
  try { await navigator.clipboard.writeText(text); toast("Copied to clipboard", "ok"); }
  catch { toast("Copy failed", "err"); }
};
function toast(msg, kind="ok"){ const t = el('div',{textContent:msg});
  t.style.position='fixed'; t.style.bottom='18px'; t.style.left='50%'; t.style.transform='translateX(-50%)';
  t.style.background = kind==='ok' ? 'var(--ok)' : kind==='err' ? 'var(--err)' : 'var(--warn)';
  t.style.color = '#000'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.fontWeight='700'; t.style.boxShadow='var(--shadow)';
  document.body.appendChild(t); setTimeout(()=>t.remove(), 1400);
}

// ---- Card factory ----
function makeCard({ key, title, hint, code, openUrl, uriScheme, placeholderQR=false }){
  const card = el('article',{ className:'card', dataset:{ key } });

  // icon
  const icon = el('div',{className:'icon', innerHTML: icons[key] || icons.generic});
  const body = el('div',{className:'body'});
  const h3 = el('h3',{textContent:title});
  const p = el('p',{textContent:hint});

  const row = el('div',{className:'row'});
  const field = el('div',{className:'field'});
  const codeEl = el('code',{textContent: code || '—'});
  field.appendChild(codeEl);

  const actions = el('div',{className:'actions'});
  const copyBtn = el('button',{className:'btn copy-btn', innerHTML: icons.copy + 'Copy'});
  copyBtn.addEventListener('click',()=> copy(codeEl.textContent));
  actions.appendChild(copyBtn);
  if (openUrl){
    const openBtn = el('button',{className:'btn open-btn', innerHTML: icons.open + 'Open'});
    openBtn.addEventListener('click',()=> window.open(openUrl,'_blank','noopener'));
    actions.appendChild(openBtn);
  }
  if (uriScheme && code){
    const uriBtn = el('button',{className:'btn open-btn', innerHTML: icons.link + 'URI'});
    uriBtn.addEventListener('click',()=>{ window.location.href = `${uriScheme}${encodeURIComponent(code)}`; });
    actions.appendChild(uriBtn);
  }

  row.appendChild(field);
  row.appendChild(actions);

  body.appendChild(h3);
  body.appendChild(p);
  body.appendChild(row);

  card.appendChild(icon);
  card.appendChild(body);

  if (placeholderQR){
    const rightCol = el('div',{style:'margin-left:auto; display:flex; flex-direction:column; align-items:center; gap:8px;'});
    const qrWrap = el('div',{className:'qr'});
    qrWrap.textContent = 'QR';
    const qrBtn = el('button',{className:'btn', innerHTML: icons.link + 'Show QR'});
    const payload = (uriScheme && code) ? `${uriScheme}${code}` : (openUrl || code || '');
    qrBtn.addEventListener('click',()=>{
      if (!payload) return;
      try {
        renderQR(qrWrap, payload, 160);
        qrBtn.textContent = 'Refresh QR';
      } catch(e){ toast('QR failed','err'); }
    });
    rightCol.appendChild(qrWrap);
    rightCol.appendChild(qrBtn);
    card.appendChild(rightCol);
  }
  return card;
}

// ---- Icons (inline, tiny) ----
const icons = {
  generic:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 8h12M6 12h12M6 16h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  paypal:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M5 17l1.2-7.8C6.5 6.6 8.2 5 10.2 5h5.2c1.9 0 3.4 1.6 3.1 3.5-.3 1.9-2.1 3.5-4 3.5h-3.3l-.7 5H5z" fill="currentColor"/></svg>`,
  venmo:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 4h12v16H6z" stroke="currentColor" stroke-width="2"/><path d="M9 7l3 10 3-6" stroke="currentColor" stroke-width="2"/></svg>`,
  cashapp:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="2"/><path d="M9 12c0-1.7 1.3-3 3-3h2M9 12c0 1.7 1.3 3 3 3h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  btc:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M10 7h4a3 3 0 010 6h-4V7zm0 6h4a3 3 0 010 6h-4v-6z" stroke="currentColor" stroke-width="2"/></svg>`,
  eth:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M12 3l6 9-6 3-6-3 6-9zm0 18l6-9-6 3-6-3 6 9z" fill="currentColor"/></svg>`,
  sol:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 8l2-2h10l-2 2H6zm0 10l2-2h10l-2 2H6zm0-5l2-2h10l-2 2H6z" fill="currentColor"/></svg>`,
  usdc:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M9 12a3 3 0 106 0 3 3 0 10-6 0z" stroke="currentColor" stroke-width="2"/></svg>`,
  xmr:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/><path d="M6 14l6-6 6 6v4H6v-4z" fill="currentColor"/></svg>`,
  lightning:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z" fill="currentColor"/></svg>`,
  stripe:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M4 12c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8" stroke="currentColor" stroke-width="2"/><path d="M8 12h8" stroke="currentColor" stroke-width="2"/></svg>`,
  patreon:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="14" cy="10" r="6" stroke="currentColor" stroke-width="2"/><rect x="4" y="4" width="3" height="16" fill="currentColor"/></svg>`,
  kofi:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M4 8h12a4 4 0 010 8H8l-4-8z" stroke="currentColor" stroke-width="2"/><path d="M7 8v8" stroke="currentColor" stroke-width="2"/></svg>`,
  bmac:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 18h12l-2-10H8l-2 10z" stroke="currentColor" stroke-width="2"/><circle cx="12" cy="7" r="3" stroke="currentColor" stroke-width="2"/></svg>`,
  gh:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M12 2a10 10 0 00-3.2 19.5c.5.1.7-.2.7-.5v-1.8c-3 .7-3.6-1.4-3.6-1.4-.5-1.2-1.2-1.5-1.2-1.5-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 1.7 2.7 1.2 3.3.9.1-.7.4-1.2.7-1.5-2.4-.3-5-1.2-5-5.4 0-1.2.4-2.1 1.1-2.9-.1-.3-.5-1.5.1-3.1 0 0 .9-.3 3 .9a10.3 10.3 0 015.5 0c2.1-1.2 3-.9 3-.9.6 1.6.2 2.8.1 3.1.7.8 1.1 1.7 1.1 2.9 0 4.2-2.6 5.1-5 5.4.4.4.8 1 .8 2v3c0 .3.2.6.7.5A10 10 0 0012 2z" fill="currentColor"/></svg>`,
  donorbox:`<svg width="22" height="22" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" rx="3" stroke="currentColor" stroke-width="2"/><path d="M8 9h8v6H8z" stroke="currentColor" stroke-width="2"/></svg>`,
  link:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M10 14l-2 2a4 4 0 01-6-6l2-2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M14 10l2-2a4 4 0 116 6l-2 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  open:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M14 3h7v7M21 3l-9 9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M5 21h10a2 2 0 002-2V9" stroke="currentColor" stroke-width="2"/></svg>`,
  copy:`<svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="9" y="9" width="11" height="11" rx="2" stroke="currentColor" stroke-width="2"/><rect x="4" y="4" width="11" height="11" rx="2" stroke="currentColor" stroke-width="2"/></svg>`
};

function buildCards(){
  const grid = document.getElementById('cards');
  grid.innerHTML = '';
  const push = (c)=> grid.appendChild(c);

  // PAYPAL
  if (!isEmpty(CONFIG.paypalMe) || !isEmpty(CONFIG.paypalEmail)){
    const link = !isEmpty(CONFIG.paypalMe) ? `https://paypal.me/${fmt(CONFIG.paypalMe)}` : `mailto:${fmt(CONFIG.paypalEmail)}`;
    push(makeCard({ key:'paypal', title:'PayPal', hint:'PayPal.Me or email', code: !isEmpty(CONFIG.paypalMe) ? `paypal.me/${fmt(CONFIG.paypalMe)}` : fmt(CONFIG.paypalEmail), openUrl: link }));
  }
  // VENMO
  if (!isEmpty(CONFIG.venmo)){
    const handle = CONFIG.venmo.replace(/^@?/, '@');
    const link = `https://venmo.com/${handle.replace('@','')}`;
    push(makeCard({ key:'venmo', title:'Venmo', hint:'Handle', code: handle, openUrl: link }));
  }
  // CASH APP
  if (!isEmpty(CONFIG.cashapp)){
    const tag = CONFIG.cashapp.startsWith('$')? CONFIG.cashapp : `$${CONFIG.cashapp}`;
    const link = `https://cash.app/${tag.replace('$','')}`;
    push(makeCard({ key:'cashapp', title:'Cash App', hint:'Cashtag', code: tag, openUrl: link }));
  }
  // ZELLE
  if (!isEmpty(CONFIG.zelle)){
    push(makeCard({ key:'generic', title:'Zelle', hint:'Email or phone', code: fmt(CONFIG.zelle) }));
  }
  // STRIPE LINK
  if (!isEmpty(CONFIG.stripeLink)){
    push(makeCard({ key:'stripe', title:'Card / Apple Pay (Stripe Link)', hint:'Hosted checkout', code: 'stripe.link', openUrl: fmt(CONFIG.stripeLink) }));
  }
  // PATREON
  if (!isEmpty(CONFIG.patreon)){
    const u = fmt(CONFIG.patreon);
    push(makeCard({ key:'patreon', title:'Patreon', hint:'Monthly support', code: `patreon.com/${u}`, openUrl: `https://patreon.com/${u}` }));
  }
  // KO-FI
  if (!isEmpty(CONFIG.kofi)){
    const u = fmt(CONFIG.kofi);
    push(makeCard({ key:'kofi', title:'Ko‑fi', hint:'One‑off or monthly', code: `ko-fi.com/${u}`, openUrl: `https://ko-fi.com/${u}` }));
  }
  // BUY ME A COFFEE
  if (!isEmpty(CONFIG.buymeacoffee)){
    const u = fmt(CONFIG.buymeacoffee);
    push(makeCard({ key:'bmac', title:'Buy Me a Coffee', hint:'One‑off or monthly', code: `buymeacoffee.com/${u}`, openUrl: `https://www.buymeacoffee.com/${u}` }));
  }
  // GITHUB SPONSORS
  if (!isEmpty(CONFIG.githubSponsors)){
    const u = fmt(CONFIG.githubSponsors);
    push(makeCard({ key:'gh', title:'GitHub Sponsors', hint:'Support open source', code: `github.com/sponsors/${u}`, openUrl: `https://github.com/sponsors/${u}` }));
  }
  // DONORBOX
  if (!isEmpty(CONFIG.donorbox)){
    const link = CONFIG.donorbox.startsWith('http') ? CONFIG.donorbox : `https://donorbox.org/${fmt(CONFIG.donorbox)}`;
    push(makeCard({ key:'donorbox', title:'Donorbox', hint:'Nonprofit‑friendly checkout', code: link.replace(/^https?:\/\//,''), openUrl: link }));
  }

  // ACH / BANK (display only)
  if (!isEmpty(CONFIG.achRouting) && !isEmpty(CONFIG.achAccount)){
    const name = isEmpty(CONFIG.achName) ? '' : `${CONFIG.achName} · `;
    push(makeCard({ key:'generic', title:'Bank Transfer (ACH)', hint:'Routing · Account', code: `${name}${CONFIG.achRouting} · ${CONFIG.achAccount}` }));
  }

  // CRYPTO — BTC
  if (!isEmpty(CONFIG.btc)){
    push(makeCard({ key:'btc', title:'Bitcoin', hint:'On‑chain address', code: fmt(CONFIG.btc), uriScheme:'bitcoin:' , placeholderQR:true }));
  }
  // CRYPTO — Lightning
  if (!isEmpty(CONFIG.lightning)){
    const ln = fmt(CONFIG.lightning);
    // Note: for lnurl or lightning address, we don’t force a scheme; wallets will parse share text.
    push(makeCard({ key:'lightning', title:'Lightning', hint:'LNURL / Lightning Address', code: ln, openUrl: ln.startsWith('lnurl')? ln : undefined, placeholderQR:true }));
  }
  // CRYPTO — ETH
  if (!isEmpty(CONFIG.eth)){
    push(makeCard({ key:'eth', title:'Ethereum', hint:'EVM address', code: fmt(CONFIG.eth), uriScheme:'ethereum:' , placeholderQR:true }));
  }
  // CRYPTO — SOL
  if (!isEmpty(CONFIG.sol)){
    const addr = fmt(CONFIG.sol);
    // Solana URI per spec: solana:<address>?amount=... (not setting amount here)
    push(makeCard({ key:'sol', title:'Solana', hint:'SOL / SPL token address', code: addr, uriScheme:'solana:' , placeholderQR:true }));
  }
  // CRYPTO — USDC on Solana (optional separate entry)
  if (!isEmpty(CONFIG.usdcSol)){
    push(makeCard({ key:'usdc', title:'USDC (Solana)', hint:'SPL address', code: fmt(CONFIG.usdcSol), uriScheme:'solana:' , placeholderQR:true }));
  }
  // CRYPTO — Monero
  if (!isEmpty(CONFIG.xmr)){
    push(makeCard({ key:'xmr', title:'Monero', hint:'Address (opaque)', code: fmt(CONFIG.xmr), placeholderQR:true }));
  }

  // Custom methods
  if (Array.isArray(CONFIG.other)){
    CONFIG.other.filter(Boolean).forEach((o, i)=>{
      push(makeCard({ key:'generic', title:o.label||`Method ${i+1}`, hint:o.hint||'Info', code:o.code||'', openUrl:o.openUrl }));
    });
  }
}

// ---- Page boot ----
(function init(){
  document.getElementById('pageTitle').textContent = CONFIG.title || 'Tip / Donate';
  document.getElementById('pageSubtitle').textContent = CONFIG.subtitle || '';
  document.getElementById('copyrightYear').textContent = new Date().getFullYear();
  buildCards();

  // Share & Copy‑all actions
  const shareBtn = document.getElementById('shareBtn');
  shareBtn.addEventListener('click', async ()=>{
    try{
      if (navigator.share){ await navigator.share({ title: document.title, text: CONFIG.subtitle || 'Support my work', url: location.href }); }
      else { await copy(location.href); }
    }catch(e){ /* user canceled */ }
  });

  const copyAllBtn = document.getElementById('copyAllBtn');
  copyAllBtn.addEventListener('click', ()=>{
    const parts = [];
    const map = [
      ['PayPal', !isEmpty(CONFIG.paypalMe) ? `paypal.me/${fmt(CONFIG.paypalMe)}` : fmt(CONFIG.paypalEmail)],
      ['Venmo', fmt(CONFIG.venmo)],
      ['Cash App', fmt(CONFIG.cashapp)],
      ['Zelle', fmt(CONFIG.zelle)],
      ['BTC', fmt(CONFIG.btc)],
      ['Lightning', fmt(CONFIG.lightning)],
      ['ETH', fmt(CONFIG.eth)],
      ['SOL', fmt(CONFIG.sol)],
      ['USDC (Sol)', fmt(CONFIG.usdcSol)],
      ['Monero', fmt(CONFIG.xmr)],
    ];
    map.forEach(([k,v])=>{ if(!isEmpty(v)) parts.push(`${k}: ${v}`); });
    if (!isEmpty(CONFIG.stripeLink)) parts.push(`Stripe: ${fmt(CONFIG.stripeLink)}`);
    if (!isEmpty(CONFIG.patreon)) parts.push(`Patreon: patreon.com/${fmt(CONFIG.patreon)}`);
    if (!isEmpty(CONFIG.kofi)) parts.push(`Ko‑fi: ko-fi.com/${fmt(CONFIG.kofi)}`);
    if (!isEmpty(CONFIG.buymeacoffee)) parts.push(`BMAC: buymeacoffee.com/${fmt(CONFIG.buymeacoffee)}`);
    if (!isEmpty(CONFIG.githubSponsors)) parts.push(`GitHub Sponsors: github.com/sponsors/${fmt(CONFIG.githubSponsors)}`);
    if (!isEmpty(CONFIG.donorbox)) parts.push(`Donorbox: ${fmt(CONFIG.donorbox)}`);
    CONFIG.other?.forEach(o=>{ if(o?.label && o?.code) parts.push(`${o.label}: ${o.code}`); });
    copy(parts.join('\n'));
  });
})();
// --- Embedded QR library (MIT, qrcode.js trimmed) ---
/*! QRCode for JavaScript (trimmed) | MIT | Kazuhiko Arase */
!function(){function l(a){this.mode=c.MODE_8BIT_BYTE,this.data=a,this.parsed=[];for(var b=0;b<a.length;b++)this.parsed.push(a.charCodeAt(b))}function m(){this.buffer=[],this.length=0}function n(a,b){this.totalCount=a,this.dataCount=b}function o(){this.buffer=[],this.at=-1}function p(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataList=[],this.dataCache=null}function q(a,b){this.num=a,this.primitive=b,this.expTable=new Array(a),this.logTable=new Array(a);for(var c=1,d=0;d<a;d++)this.expTable[d]=c,this.logTable[c]=d,c*=2,c>=a&&(c^=b)}function r(a,b){if(null==a.length)throw new Error(a.length+'/'+b);for(var c=0;c<a.length&&0==a[c];)c++;for(var d=new Array(a.length-c+b),e=0;e<a.length-c;e++)d[e]=a[e+c];return d}function s(a,b){for(var c=new Array(a.length+b-1),d=0;d<a.length;d++)for(var e=0;e<b.length;e++)c[d+e]^=t.gexp(t.glog(a[d])+t.glog(b[e]));return c}function u(a,b){for(var c=a.length-b.length;c>=0;){for(var d=t.glog(a[c]) - t.glog(b[0]),e=0;e<b.length;e++)a[c+e]^=t.gexp(t.glog(b[e])+d);for(;c>=0&&0==a[c];)c--}return a}function v(a){for(this.buffer=[],this.length=0,this.put=function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},this.putBit=function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}}function w(a){for(var b=new v,c=1;c<=a.getRSBlocks().length;c++)b.put(0,4);for(var d=0;d<a.dataList.length;d++){var e=a.dataList[d];b.put(e.mode,4),b.put(e.getLength(),a.getLengthInBits(e.mode)),e.write(b)}for(var f=0;f<4&&b.length%8!=0;f++)b.putBit(0);for(;b.length%8!=0;)b.putBit(0);for(var g=[],h=0;h<b.buffer.length;h++)g.push(b.buffer[h]);for(var i=a.getMaxDataCount() - g.length,j=0;i>j;j++)g.push(j%2?17:236);return x(g,a)}function x(a,b){for(var c=b.getRSBlocks(),d=new y,e=0,f=0;f<c.length;f++)e=Math.max(e,c[f].dataCount);for(var g=new Array(c.length),h=0;h<c.length;h++){var i=c[h].dataCount;g[h]=new z(a.splice(0,i))}for(var j=0;j<c.length;j++){var k=c[j].totalCount - c[j].dataCount,l=A.getRSFactor(k),m=new z(Array(k));m.set(u(s(g[j].buffer,l.buffer),l.buffer).slice(-k)),g[j].rs=m}return B(g,b)}function y(){this.buffer=[],this.put=function(a){this.buffer.push(a)},this.getAt=function(a){return this.buffer[a]}}function z(a){this.buffer=a||[],this.get=function(a){return this.buffer[a]},this.set=function(a){this.buffer=a},this.size=function(){return this.buffer.length}}function B(a,b){for(var c=b.getRSBlocks(),d=new y,e=0,f=0;f<c.length;f++)e=Math.max(e,c[f].dataCount);for(var g=0;g<e;g++)for(var h=0;h<c.length;h++)g<a[h].buffer.length&&d.put(a[h].buffer[g]);for(var i=0;i<c.length;i++)for(var j=0;j<c[i].rs.size();j++)d.put(a[i].rs.get(j));return d}function C(a,b){for(var c=0,d=0,e=0;e<a;e++)for(var f=0;f<a;f++)if(!b(f,e)){var g=!1;(f==8||e==8)&&(g=!0),g||c++}return c}var a=0,b=1,c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e=[null,[[new n(19,7)],[new n(16,10)],[new n(13,13)],[new n(9,17)]],[[new n(34,10)],[new n(28,16)],[new n(22,22)],[new n(16,28)]],[[new n(55,15)],[new n(44,26)],[new n(34,18)],[new n(26,22)]],[ [new n(80,20)],[new n(64,18)],[new n(48,26)],[new n(36,16)]]];q.prototype={glog:function(a){return this.logTable[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return this.expTable[a]}};var t=new q(256,285);o.prototype={get:function(a){var b=Math.floor(a/8);return 1==(this.buffer[b]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},putBit:function(a){var b=Math.floor(++this.at/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.at%8)}};p.PAD0=236,p.PAD1=17,p.prototype={addData:function(a){this.dataList.push(new l(a)),this.dataCache=null},isDark:function(a,b){if(null==this.modules[a]||null==this.modules[a][b])throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.typeNumber=1;for(var b=d.M; b<=d.M; b++){this.modules=null,this.moduleCount=0;for(var c=1;c<=4;c++){this.errorCorrectLevel=b,this.typeNumber=c,this.makeImpl(!1),this.makeImpl(!0); if(this.dataCache) break; } if(this.dataCache) break; }},makeImpl:function(a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++){this.modules[b]=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++)this.modules[b][c]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.dataCache||(this.dataCache=w(this)),this.mapData(this.dataCache)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(a+c<=-1||this.moduleCount<=a+c))for(var e=-1;7>=e;e++)b+e<=-1||this.moduleCount<=b+e||(this.modules[a+c][b+e]=c>=0&&6>=c&&(0==e||6==e)||e>=0&&6>=e&&(0==c||6==c)||c>=2&&4>=c&&e>=2&&4>=e)},getBestMaskPattern:function(){for(var b=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var e=C(this.moduleCount,this.isDark.bind(this));(0==d||b>e)&&(b=e,c=d)}return c},createSvgTag:function(a){a=a||{};for(var b=this.getModuleCount(),c=a.cellSize||2,d=a.margin||0,e=document.createElementNS('http://www.w3.org/2000/svg','svg'),f=(b*c+2*d),g=0;g<b;g++)for(var h=0;h<b;h++)this.isDark(g,h)&&((rect=document.createElementNS('http://www.w3.org/2000/svg','rect')).setAttribute('x',String(g*c+d)),rect.setAttribute('y',String(h*c+d)),rect.setAttribute('width',String(c)),rect.setAttribute('height',String(c)),rect.setAttribute('fill','#000'),e.appendChild(rect));return e.setAttribute('viewBox','0 0 '+f+' '+f),e.setAttribute('width',String(f)),e.setAttribute('height',String(f)), new XMLSerializer().serializeToString(e) },setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=a%2==0),null==this.modules[6][a]&&(this.modules[6][a]=a%2==0)},setupPositionAdjustPattern:function(){for(var a=this.getPatternPosition(),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;f<=2;f++)for(var g=-2;g<=2;g++)this.modules[d+f][e+g]= -2==f||2==f||-2==g||2==g||0==f&&0==g}},getPatternPosition:function(){return p.PATTERN_POSITION_TABLE[this.typeNumber-1]||[]},mapData:function(a){for(var b=-1,c=this.moduleCount-1,d=7,e=0,f=this.moduleCount-1;f>0;f-=2)for(6==f&&f--; ;){for(var g=0;2>g;g++)if(null==this.modules[c][f-g]){var h=!1;e<a.length&&(h=1==(a.getAt(e)>>>d&1)),this.modules[c][f-g]=h,d--, -1==d&&(e++,d=7)}if((c+=b)<0||this.moduleCount<=c){c-=b,b=-b;break}}},getRSBlocks:function(){return p.RS_BLOCK_TABLE[this.typeNumber][this.errorCorrectLevel]},getLengthInBits:function(a){return 8},getMaxDataCount:function(){for(var a=0,b=this.getRSBlocks(),c=0;c<b.length;c++)a+=b[c].dataCount;return a}};l.prototype={getLength:function(){return this.parsed.length},write:function(a){for(var b=0;b<this.parsed.length;b++)a.put(this.parsed[b],8)}};m.prototype={get:function(a){var b=Math.floor(a/8);return 1==(this.buffer[b]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var A={getRSFactor:function(a){for(var b=[1],c=0;a>c;c++)b=s(b,[1,t.gexp(c)]);return{buffer:b}}};p.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26]],p.RS_BLOCK_TABLE=[null,[[new n(26,19)],[new n(26,16)],[new n(26,13)],[new n(26,9)]],[[new n(44,34)],[new n(44,28)],[new n(44,22)],[new n(44,16)]],[[new n(70,55)],[new n(70,44)],[new n(35,17)],[new n(50,26)]]];var D=p;window.qrcode=function(a,b){var c=new D(a||1,b||d.M);return c}}();
<\/script>
</body>
</html>
